/* ENS in a single transaction 
addres: 0x4b976Fe5dd9dB874e4203e8c55e86c80A5a57aBC
Metadata of "ensdeployer" was published successfully.
@ensdomains/buffer/contracts/Buffer.sol : ipfs://QmUZpq2w29ZxFF8b96qhr2jwj8aK14R2rZT2tzNPk128bo
@ensdomains/ens-contracts/contracts/dnssec-oracle/BytesUtils.sol : ipfs://QmRXqFRxDuPnEVPDN64wMuP1o57f1dC19Ub73ZKqSqV6Ag
@ensdomains/ens-contracts/contracts/dnssec-oracle/RRUtils.sol : ipfs://QmUpV9o59WUdorEiYVPJMaaNT2Fb9wbPAjT89dfinM9fEa
@ensdomains/ens-contracts/contracts/registry/ENS.sol : ipfs://QmPma68CFjidUB9LRVXZ7qtuKNfNUQSGzUUu8USfJVLdUV
@ensdomains/ens-contracts/contracts/registry/ENSRegistry.sol : ipfs://QmVGHjdnsBua2qVEcuA3WEpnexYv4kBfwWSisnskT2Ks43
@ensdomains/ens-contracts/contracts/registry/FIFSRegistrar.sol : ipfs://QmPMKi59Z8VCvB87m4hazg8nQ3jGdiR24nd4MYMAAC5AuK
@ensdomains/ens-contracts/contracts/registry/ReverseRegistrar.sol : ipfs://QmaoBoWEcAVo3YTzWaYmJmidyFq5jgskMyMSqDHzj3YgDX
@ensdomains/ens-contracts/contracts/resolvers/IMulticallable.sol : ipfs://QmUbdCA4g3jLvbi273BUy69yPE5838Yag7yvv7sM3ZYWkY
@ensdomains/ens-contracts/contracts/resolvers/ISupportsInterface.sol : ipfs://QmQjmGKPfCTtTVZNhQyyw7S7t4iGAcwxBCdEQwvpWpN4VD
@ensdomains/ens-contracts/contracts/resolvers/Multicallable.sol : ipfs://QmQFhW2bBMq5WRKszuwh1Rm8nk34FLSMGQgMKpANL1FxpH
@ensdomains/ens-contracts/contracts/resolvers/PublicResolver.sol : ipfs://QmaSM9ygre6AwxAwNBeVM4Cc3SJBymYp2vPfgMNGyA7Mxo
@ensdomains/ens-contracts/contracts/resolvers/ResolverBase.sol : ipfs://QmZpGaiQruprqy6frnFu5nVE9md2qg28h3t4E1HM3pVivp
@ensdomains/ens-contracts/contracts/resolvers/SupportsInterface.sol : ipfs://QmZwsntFy9uMFs8XLzgZbB3EePLe6vPoGDukGmfCMSgxC9
@ensdomains/ens-contracts/contracts/resolvers/profiles/ABIResolver.sol : ipfs://QmZvdFc37fn9W9PHpPNGzEZwx3UfyMDhozbmpaS2c1vLcg
@ensdomains/ens-contracts/contracts/resolvers/profiles/AddrResolver.sol : ipfs://QmaDLvSFBoJ9HrWdVcBu94d8gCjh1mg7oSZNQr39oP8x8U
@ensdomains/ens-contracts/contracts/resolvers/profiles/ContentHashResolver.sol : ipfs://QmUGdCXBxJ1F5Y5yjYB1skWJFdpgKk1S3upRdnDwZkfG2S
@ensdomains/ens-contracts/contracts/resolvers/profiles/DNSResolver.sol : ipfs://QmT784aDGkbeRWEKgyLgcyBvr7tvtz9WZWYtcCofL1RHGi
@ensdomains/ens-contracts/contracts/resolvers/profiles/IABIResolver.sol : ipfs://QmW5kJk2YNf1jJ7nVkhvfMGzHi8eN5pxCJVSZeJqbATR4t
@ensdomains/ens-contracts/contracts/resolvers/profiles/IAddrResolver.sol : ipfs://QmTg9uHTugTxzqddN68gnhNbGt4bGJBS9mQcss6GYggR4X
@ensdomains/ens-contracts/contracts/resolvers/profiles/IAddressResolver.sol : ipfs://QmXLzqw8uZHTaGCLU7yn57HRm87fBYwb9No5CN3bhL4MNw
@ensdomains/ens-contracts/contracts/resolvers/profiles/IContentHashResolver.sol : ipfs://QmSaHBAqtDdbQLH6QN4EbupMrq2ah8g6fqE7fLX1u4cjMZ
@ensdomains/ens-contracts/contracts/resolvers/profiles/IDNSRecordResolver.sol : ipfs://QmUdBPRUnpHdT2Kuo8gcUFpzfTQQUSdqaJjoN2EfJQfFim
@ensdomains/ens-contracts/contracts/resolvers/profiles/IDNSZoneResolver.sol : ipfs://QmXEgkr63rrXypUu7eoQV4zsu6vVMmRma2Uk91cDBqQx6i
@ensdomains/ens-contracts/contracts/resolvers/profiles/IInterfaceResolver.sol : ipfs://QmQmFKYbTxdEXw72L7Tm4VZ9uD7gHg6pZiJiB6wgJAnABv
@ensdomains/ens-contracts/contracts/resolvers/profiles/INameResolver.sol : ipfs://QmT2A8eswhJU9YadCs9BtwKNj6YGypntXmFepANQYyGw7x
@ensdomains/ens-contracts/contracts/resolvers/profiles/IPubkeyResolver.sol : ipfs://QmaxLx2pqCUxf9W2dusfviZ9aSiTuVwuekGo73rjvmGifE
@ensdomains/ens-contracts/contracts/resolvers/profiles/ITextResolver.sol : ipfs://QmcyuseXSxgoL5PHAmuVy4N2d19MeenreuXfHG3XZ4NRbU
@ensdomains/ens-contracts/contracts/resolvers/profiles/InterfaceResolver.sol : ipfs://QmTCTyeNYTUXtEsq68cQLRsEhdGLrHb7HuQL19A3y1fXG2
@ensdomains/ens-contracts/contracts/resolvers/profiles/NameResolver.sol : ipfs://QmRarfnJQyJ86ueykFpGrLBjFNujqWUnXmJaxWiRM7SNrh
@ensdomains/ens-contracts/contracts/resolvers/profiles/PubkeyResolver.sol : ipfs://QmckPtmNjiQauqZaCWgQPsd28BAo1XVLTBKgyBqqSNRWMb
@ensdomains/ens-contracts/contracts/resolvers/profiles/TextResolver.sol : ipfs://QmeXhcsiNfxRhiYS5nCJd6kXyxxhnyjpcoZeqWj2AXX6y3
@ensdomains/ens-contracts/contracts/root/Controllable.sol : ipfs://QmSmBDnzyMPZTRB1sg1atQC5qfd7H5bZrohADaw7F1xKwT
@openzeppelin/contracts/access/Ownable.sol : ipfs://QmXRoFGUgfsaRkoPT5bxNMtSayKTQ8GZATLPXf69HcRA51
@openzeppelin/contracts/utils/Context.sol : ipfs://QmRK2Y5Yc6BK7tGKkgsgn3aJEQGi5aakeSPZvS65PV8Xp3
ENSsingle.sol : ipfs://Qmd6FHyqFhDcAwjrUejqD4ZUUhqbT8aFDvT5kE1y1kdumn
metadata.json : ipfs://QmeN37oaUVi65E9gXkEecVeTHvot3vK1yLEs3VPcDV2qSx

0x4b976Fe5dd9dB874e4203e8c55e86c80A5a57aBC

ENSDEPLOYER AT 0x4b976Fe5dd9dB874e4203e8c55e86c80A5a57aBC (BLOCKCHAIN)
ADDR_LABEL: bytes32: 0xe5e14487b78f85faa6e1808e89246cf57dd34831548ff2e6097380d98db2504a
ens : address: 0xF42A80A870fF1AC7eE93A71c4E17684c775C9996
fifsRegistrar : address: 0x0B1923A115A854EE5233D47c737b45F045D5E9F6
publicResolver: address: 0x7b703097FB728EeA5579E2091e97D6eAff231F9b
RESOLVER_LABEL: bytes32: 0x329539a1d23af1810c48a07fe7fc66a3b34fbc8b37e9b3cdb97bb88ceab7e4bf
REVERSE_REGISTRAR_LABEL: bytes32: 0xdec08c9dbbdd0890e300eb5062089b2d4b1c40e3673bbccb5423f7b37dcf9a9c
reverseRegistrar: address: 0x8C9007B59B4E2F69491249336e6c2CD115b9e8Fa
TLD_LABEL: bytes32: 0x4f5b812789fc606be1b3b16908db13fc7a9adf7ca72641f84d75b47069d3d7f0

*/
pragma solidity >=0.8.4;
import {INameWrapper, PublicResolver} from '@ensdomains/ens-contracts/contracts/resolvers/PublicResolver.sol';
import '@ensdomains/ens-contracts/contracts/registry/ENSRegistry.sol';
import '@ensdomains/ens-contracts/contracts/registry/FIFSRegistrar.sol';
import {NameResolver, ReverseRegistrar} from '@ensdomains/ens-contracts/contracts/registry/ReverseRegistrar.sol';

// Construct a set of test ENS contracts.
contract ENSDeployer {
  bytes32 public constant TLD_LABEL = keccak256('eth');
  bytes32 public constant RESOLVER_LABEL = keccak256('resolver');
  bytes32 public constant REVERSE_REGISTRAR_LABEL = keccak256('reverse');
  bytes32 public constant ADDR_LABEL = keccak256('addr');

  ENSRegistry public ens;
  FIFSRegistrar public fifsRegistrar;
  ReverseRegistrar public reverseRegistrar;
  PublicResolver public publicResolver;

  function namehash(bytes32 node, bytes32 label) public pure returns (bytes32) {
    return keccak256(abi.encodePacked(node, label));
  }

  constructor() public {
    ens = new ENSRegistry();
    publicResolver = new PublicResolver(ens, INameWrapper(address(0)));

    // Set up the resolver
    bytes32 resolverNode = namehash(bytes32(0), RESOLVER_LABEL);

    ens.setSubnodeOwner(bytes32(0), RESOLVER_LABEL, address(this));
    ens.setResolver(resolverNode, address(publicResolver));
    publicResolver.setAddr(resolverNode, address(publicResolver));

    // Create a FIFS registrar for the TLD
    fifsRegistrar = new FIFSRegistrar(ens, namehash(bytes32(0), TLD_LABEL));

    ens.setSubnodeOwner(bytes32(0), TLD_LABEL, address(fifsRegistrar));

    // Construct a new reverse registrar and point it at the public resolver
    reverseRegistrar = new ReverseRegistrar(
      ens,
      NameResolver(address(publicResolver))
    );

    // Set up the reverse registrar
    ens.setSubnodeOwner(bytes32(0), REVERSE_REGISTRAR_LABEL, address(this));
    ens.setSubnodeOwner(
      namehash(bytes32(0), REVERSE_REGISTRAR_LABEL),
      ADDR_LABEL,
      address(reverseRegistrar)
    );
  }
}
